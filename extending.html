


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7. Extending Plone &mdash; Mastering Plone 1.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'',
        VERSION:'1.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="Mastering Plone 1.1 documentation" href="index.html"/>
        <link rel="next" title="8. Extend Plone with Add-ons" href="addons.html"/>
        <link rel="prev" title="6. Configuring and Customising Plone through the web" href="configuring_customizing.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> Mastering Plone</a>
        <form class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#who-are-we">Who are we?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#who-are-you">Who are you?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-will-we-do">What will we do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-will-we-not-do">What will we not do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#further-reading">Further Reading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. Installation &amp; Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installing-plone">Installing Plone</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#hosting-plone">Hosting Plone</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plone_training_config/instructions.html">3. Installing Plone for the Training</a><ul>
<li class="toctree-l2"><a class="reference internal" href="plone_training_config/instructions.html#install-virtualbox">Install VirtualBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="plone_training_config/instructions.html#install-and-configure-vagrant">Install and configure Vagrant</a></li>
<li class="toctree-l2"><a class="reference internal" href="plone_training_config/instructions.html#what-vagrant-does">What Vagrant does</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="anatomy.html">4. The Anatomy of Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">5. The Features of Plone</a><ul>
<li class="toctree-l2"><a class="reference internal" href="features.html#starting-and-stopping-plone">Starting and Stopping Plone</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#users">Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#configure-a-mailserver">Configure a Mailserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#walktrough-of-the-ui">Walktrough of the UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#content-types">Content-Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#folders">Folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#collections">Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#content-rules">Content Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#history">History</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#manage-members-and-groups">Manage members and groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#workflows">Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#working-copy">Working copy</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#placeful-workflows">Placeful workflows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuring_customizing.html">6. Configuring and Customising Plone through the web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#the-control-panel">The Control Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#portlets">Portlets</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#viewlets">Viewlets</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#zmi">ZMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#actions-portal-actions">Actions (portal_actions)</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#skins-portal-skins">Skins (portal_skins)</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#css-registry-portal-css">CSS-Registry (portal_css)</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">7. Extending Plone</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#extension-technologies">Extension technologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-are-components-what-is-zcml">What are components, what is ZCML</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="addons.html">8. Extend Plone with Add-ons</a><ul>
<li class="toctree-l2"><a class="reference internal" href="addons.html#how-to-find-addons">How to find addons</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#installing-addons">Installing Addons</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#ploneformgen">PloneFormGen</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#internationalisation">Internationalisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#add-bling-with-collective-plonetruegallery">Add &#8216;bling&#8217; with collective.plonetruegallery</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#customizing-the-design-with-plone-app-themeeditor">Customizing the design with plone.app.themeeditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#export-customizations">export customizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#inspect-the-package">inspect the package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="theming.html">9. Theming</a></li>
<li class="toctree-l1"><a class="reference internal" href="buildout_1.html">10. Buildout I</a></li>
<li class="toctree-l1"><a class="reference internal" href="ide.html">11. IDE&#8217;s and Editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="eggs.html">12. Creating your own eggs to customize Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="dexterity.html">13. Creating content-types with Dexterity</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#what-is-a-content-type">What is a content-type?</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#dexterity-and-archetypes-a-comparison">Dexterity and Archetypes - A Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#creating-content-types-ttw">Creating content-types TTW</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#moving-content-types-into-code">Moving content-types into code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views_1.html">14. Views I</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views_1.html#a-simple-browser-view">A simple browser view</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zpt.html">15. Zope Page Templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zpt.html#tal-and-tales">TAL and TALES</a></li>
<li class="toctree-l2"><a class="reference internal" href="zpt.html#metal-and-macros">METAL and macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="zpt.html#accessing-plone-from-the-template">Accessing Plone from the template</a></li>
<li class="toctree-l2"><a class="reference internal" href="zpt.html#what-we-missed">What we missed</a></li>
<li class="toctree-l2"><a class="reference internal" href="zpt.html#chameleon">Chameleon</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zpt_2.html">16. Customizing existing templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zpt_2.html#newsitem-view-pt">newsitem_view.pt</a></li>
<li class="toctree-l2"><a class="reference internal" href="zpt_2.html#folder-summary-view-pt">folder_summary_view.pt</a></li>
<li class="toctree-l2"><a class="reference internal" href="zpt_2.html#skin-templates">skin-templates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views_2.html">17. Views II: A default view for &#8220;talk&#8221;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views_2.html#grok">Grok</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views_3.html">18. Views III: A Talk list</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#using-portal-catalog">Using portal_catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#brains-and-objects">brains and objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#the-template-for-the-listing">The template for the listing</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#setting-a-custom-view-as-default-view-on-an-object">Setting a custom view as default-view on an object</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#adding-some-javascript-collective-js-datatables">Adding some javascript (collective.js.datatables)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_search.html">19. Custom search</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_search.html#eea-facetednavigation">eea.facetednavigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_search.html#collective-formcriteria">collective.formcriteria</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_search.html#advanced-topics">Advanced Topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ressources.html">20. Ressources</a></li>
<li class="toctree-l1"><a class="reference internal" href="social_behavior.html">21. Social behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewlets.html">22. Writing Viewlets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="viewlets.html#social-viewlet">social-viewlet</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewlets.html#voting-viewlet">voting-viewlet</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewlets.html#writing-the-viewlet-class">writing the viewlet-class</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewlets.html#the-template">the template</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewlets.html#the-javascript-code-patrick">The javascript code (Patrick)</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewlets.html#simpleviews-schreiben-patrick">2 Simpleviews schreiben (Patrick)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deployment_code.html">23. Deploying your code</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment_sites.html">24. Buildout II: Deploying your site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deployment_sites.html#the-starzel-buildout">The starzel-buildout</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment_sites.html#other-tools">Other tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="future_of_plone.html">25. The Future of Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="optional.html">26. Optional</a><ul>
<li class="toctree-l2"><a class="reference internal" href="optional.html#walk-through-a-package">Walk through a package</a></li>
<li class="toctree-l2"><a class="reference internal" href="optional.html#zmi-in-depth">ZMI in depth</a></li>
<li class="toctree-l2"><a class="reference internal" href="optional.html#debugging">Debugging</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">Mastering Plone</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">7. Extending Plone</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="extending-plone">
<h1>7. Extending Plone<a class="headerlink" href="#extending-plone" title="Permalink to this headline">¶</a></h1>
<p>Zope is extensible and so is Plone.</p>
<p>If you want to install an Add-on, you are going to install an Egg. Eggs consist of python files together with other needed files like page templates and the like and a bit of Metadata, bundled to a single archive file.</p>
<p>Eggs are younger than Zope. Zope needed something like eggs before there were eggs, and the Zope developers wrote their own system. Old, outdated Plone systems contain a lot of code that is not bundled in an egg. Older code did not have metadata to register things, instead you needed a special setup method. We don&#8217;t need this method but you might see it in other code. It is usually used to register Archetypes code. Archetypes is the old content type system. We use Dexterity.</p>
<div class="section" id="extension-technologies">
<h2>Extension technologies<a class="headerlink" href="#extension-technologies" title="Permalink to this headline">¶</a></h2>
<p>How do you extend Plone? This depends on what type of extension you want to create.</p>
<ul class="simple">
<li>You can create extensions with new types of objects to add to your Plone site. Usually these are content types.</li>
<li>You can create an extension that changes or extends functionality. For example to change the way Plone displays search results, or to make pictures searchable by adding a converter from jpg to text.</li>
</ul>
<div class="section" id="skin-folders">
<h3>skin_folders<a class="headerlink" href="#skin-folders" title="Permalink to this headline">¶</a></h3>
<p>Do you remember Acquisition? The Skin Folders we used to put in our css-code extend the concepts of Acquistion. Your Plone site has a folder named <tt class="docutils literal"><span class="pre">portal_skins</span></tt>. This folder has a number of sub folders. The <tt class="docutils literal"><span class="pre">portal_skins</span></tt> folder has a property that defines in which order Plone searches for attributes or objects in each sub folder.</p>
<p>The Plone logo is in a skin folder.</p>
<p>By default, your site has a custom folder, and items are first searched for in that folder.</p>
<p>To customize the logo, you copy it into the custom folder, and change it there. This way you can change templates, CSS styles, images and behavior, because a container may contain python scripts.</p>
</div>
<div class="section" id="genericsetup">
<h3>GenericSetup<a class="headerlink" href="#genericsetup" title="Permalink to this headline">¶</a></h3>
<p>The next thing is <em>GenericSetup</em>. As the name clearly implies, <em>GenericSetup</em> is part of CMF.</p>
<p>GenericSetup is tough to master, I am afraid.</p>
<p><em>GenericSetup</em> lets you define persistent configuration in XML files. <em>GenericSetup</em> parses the XML files and updates the persistent configuration according to the configuration. This is a step you have to run on your own!</p>
<p>You will see many objects in Zope or the ZMI that you can customize through the web. If they are well behaving, they can export their configuration via <em>GenericSetup</em> and import it again.</p>
<p>Typically you use <em>GenericSetup</em> to change workflows or add new content type definitions.</p>
</div>
<div class="section" id="components">
<h3>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h3>
<p>The last way is via <em>Components</em>.</p>
<p>A bit of history is in order.</p>
<p>When Zope started, object-oriented Design was <strong>the</strong> silver bullet.</p>
<p>Zope objects have more than 10 base classes.</p>
<p>After a while, XML and Components became the next silver bullet (Does anybody remember J2EE?).</p>
<p>The Zope developers decided that these new silver bullets look much, much cooler in their colts so they decided rewrite Zope with this technology.</p>
<p>As the new concepts were radically different from the old Zope concepts, the Zope developers renamed the new project to Zope 3. But it did not gain traction, the community somehow renamed it to Bluebream and this died off.</p>
<p>The component architecture itself is quite successful and the Zope developer extracted it into the Zope Toolkit. The Zope toolkit is part of Zope, and Plone developers use it extensively.</p>
<p>This is what you want to use.</p>
</div>
</div>
<div class="section" id="what-are-components-what-is-zcml">
<h2>What are components, what is ZCML<a class="headerlink" href="#what-are-components-what-is-zcml" title="Permalink to this headline">¶</a></h2>
<p>What is the absolute simplest way to extend functionality?</p>
<p>Monkey Patching.</p>
<p>In code, during load time I import some code and replace it with my code.</p>
<p>If I would want to have an extensible registry of icons for different content types, I could create a global dictionary, and whoever implements a new icon for a different content type, would add an entry to my dictionary during import time.</p>
<p>This does not scale. Multiple plugins might overwrite each other, you would explain people that they have to reorder the imports, and then, suddenly, you will to import feature A before B, B before C and C before A, or else you application won&#8217;t work.</p>
<p>Here comes the Zope Component Architecture and ZCML to your rescue.</p>
<p>With ZCML you declare utilities, adapters and browser views in ZCML, which is a XML dialect.</p>
<p>During startup, Zope reads all these ZCML statements, validates that there are not two declarations trying to register the same components and only then registers everything.</p>
<p>This is a good thing. ZCML is by the way only <em>one</em> way to declare your configuration.</p>
<p>Grok pvides another way, where some python magic allows you to decorate your code directly with a decorater to make it an adapter. You can use both ZCML and grok together.</p>
<p>We will mostly use Grok in later code examples.</p>
<p>Please be aware that not everybody loves Grok. Some parts of the Plone community think that there may only be one configuration language, others are against adding the relative big dependency of Grok to Plone. One real problem is the fact that you cannot customize components declared with grok with jbot. This is probably fixable, though. In any case, if you start to write an extension that is reusable, convert your grok declarations to ZCML to get maximum acceptance.</p>
<p>Many people hate ZCML and avoid Zope because of it being XML.</p>
<p>Personally, I just find it cumbersome but even for me as a developer it offers a nice advantage.</p>
<p>Thanks to ZCML, I hardly ever have a hard time to find out what and where extensions or customizations. For me, ZCML files are like a phone book.</p>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="addons.html" class="btn btn-neutral float-right" title="8. Extend Plone with Add-ons"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="configuring_customizing.html" class="btn btn-neutral" title="6. Configuring and Customising Plone through the web"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2013, Philip Bauer, Patrick Gerken.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>